## 시계열분석의 개요  
- 시계열 분석 : 독립 변수가 시간에 따라 변하는 패턴을 가진 변수에 사용하는 분석 방법  
- 중요!!) 시계열 분류 : 추세, 계절성, 잡음  
- 회귀분석의 변형 : 같은 변수의 자기상관관계가 존재  
ex) 한 달 전의 매출이 현재의 매출에 영향을 미칠 수 있음  
=> 자신의 변수에 영향을 받음  
- 자기상관관계 : 어떤 변수의 과거가 미래의 자신의 변수에 영향을 미치는 관계  
- 잡음의 구조 확인 : 잡음이 완전한 노이즈가 될 때까지 브리즈를 계속함  
- 추세 : 전반적으로 주기가 없이 데이터가 성장하거나 하락하는 경우  
 => 자연과학에 많이 존재!!  
 cf) 주기 => 경영학, 경제학  
- 차분 : 추세를 없애는 방법  
- 평균이 일정해짐 -> 추세가 사라짐  
x_t = T_t(추세) + S_t(계절성: 반복되는 주기) + a_t(잡음), a_t ~ N(0, sigma)  
- 구간별 평균점을 연결한 선 : 이동평균선  
<img width="476" alt="이동평균선" src="https://github.com/user-attachments/assets/f2a430f5-d39d-4143-8e7c-cfc7a7bf4f09" />
<br>

- 자기상관계수 : 같은 시계열 변수의 다른 시간대의 상관관계 계수  
- 교차상관계수 : 다른 시계열 변수끼리의 상관관계 계수  
- 교차 상관관계 : 과거의 시계열의 미래의 시계열에 시간 간격으로 영향을 줌  
- 자기상관관계 : 어떤 변수의 과거가 미래의 자신의 변수에 영향을 미치는 관계  
- 자기상관함수와 교차상관함수   
  <img width="590" alt="자기상관함수, 교차상관함수" src="https://github.com/user-attachments/assets/cab70acb-3a11-4837-8962-bc0804e69ea9" />
  <br>
  
- 자기상관함수의 분자 : 공분산, 분모 : x 변수에 대한 분산  
- 교차상관함수의 분자 : x와 y의 공분산, 분모 :  x와 y의 표준편차의 곱  
- 매우 중요!!))정상성을 만족시키기 위한 조건  
- [1] 모든 시점 t에 대하여 평균이 일정하다. => E(Z_t) = mu  
- [2] 분산 Var(Z_t)는 시점 t에 의존하지 않는다.  
- [3] 두 시점 t, s에서 공분산 Cov(Z_t, Z_s)는 시차 t-s에 의존하고 t, s에 의존하지 않는다.  
- 참고) 정상성을 만들기 위해 차분을 많이 사용한다!  
<img width="860" alt="추세" src="https://github.com/user-attachments/assets/1ce2753a-c6ce-408a-8047-56440bc69ad1" />
<br>

- 추세가 있다는 것은 비정상성이 있다는 것!  
- 차분을 할수록 평균이 일정해짐  
- 차분을 통해 비정상성 시계열이 보통 정상성으로 바뀜!!  
- 비정상성을 정상성으로 만들어야 ARMA 모델을 적용시킬 수 있다  
### 시계열분석의 주요내용   
[1] 차분은 앞의 시차에서 과거의 시차를 뺀 시계열이다.  
[2] 정상성은 트렌드가 없어야 하고 분산이 일정해야 한다.  
[3] 비정상성 시계열은 n번의 차분을 통해 정상성으로 바꿀 수 있다.  
[4] 그래프의 변형은 차분을 할 때마다 정상성으로 변하는 모습이다.  
  
## 자기상관관계분석과 ARMA 모델  
- 자기상관함수(ACF) : lag이 k인 관측치 간의 관련성을 측정하는 함수  
rho_k = Cor(y_t, y_t+k) / Var(y_t)  
- 편자기상관함수(PACF) : lag이 k외의 다른 모든 관측치를 제외하고 y_t, y_(t-k)와의 관련성만 측정하는 함수  
phi_k = corr(y_t, y_(t+k) | y_(t-1), y_(t-2), y_(t-3), ..., y_(t-k+1))   
[사진 첨부 - ARIMA 모델]
<img width="572" alt="ARIMA 모델" src="https://github.com/user-attachments/assets/b7b24458-073d-41cc-81cd-a5551a97cc2a" />
<br>

신뢰구간을 벗어난 선분의 개수를 보고 ARIMA 모델 생성   
ARIMA 모델 : p(AR계수), d(차분 계수), q(MA계수)    
=> p와 q는 ACF, PACF의 그래프를 보고 정함    
=> d는 차분의 개수로 정함   
즉 ARIMA 모델 : AR(자기 회귀 모형) + I(누적 모형) + MA(이동 평균 모형)   
**AR(자기 회귀 모형)**   
=> ex) AR(1) => Z_t = phi_1 * Z_(t-1) + a_t, |phi_1| < 1   
**I(누적 모형)** : 차분의 횟수 => 몇 번의 차분으로 정상성 시계열이 되었는지??   
**MA(이동 평균 모형)** : 노이즈로 결정   
=> ex) MA(1) => Z_t = a_t - theta_1 * a_(t-1)   
=> 관측값이 이전의 오차항의 영향을 받는다.   
ARIMA 모델의 I(d)가 누적 모형의 인수가 된다.   
ex) I(2) => 2번의 차분 후에 정상이 되었다.   
ex) AR(2) => PACF의 신뢰구간을 벗어난 점이 2개이다.   
ex) MA(4) => ACF의 신뢰구간을 벗어난 점이 4개이다.   
=> p=2, d=2, q=4 =>  ARIMA(2, 2, 4) 모델   
2번의 차분은? : 불안정한 비정상성을 정상성 시계열로 바꿈   
=> AR모델과 MA모델이 적용 가능하도록 만듦   
AR의 특성을 띄는 경우   
=> ACF : 천천히 감소   
=> PACF : 처음 시차를 제외하고 급격히 감소   
MA의 특성을 띄는 경우   
=> ACF : 급격히 감소    
=> PACF : 완만하게 감소   
급격하게 감소하는 시차를 ARMA(p, q)의 모수 p, q로 정한다.   
